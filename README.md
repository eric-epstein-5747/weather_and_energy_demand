# weather_and_energy_demand

In this project, I fit and assess a model that predicts energy demand based on weather conditions.

This repository contains the following files: 
   1. create_tables_dc - An R script which downloads, cleans, and joins data on energy demand and weather conditions in Washington, DC, 
      exporting it in the form of a csv file. 
      
   2. sales_weather - the csv file generated by create_tables_dc. I include this file for users' convenience, so that users need not 
      download the generating data themselves and then run create_tables_dc. 
      
   3. analyze_dc - An R script which:
        a) explores and analyzes the data, determines which predictors to use in explaining energy demand, 
        b) settles on a 3rd degree polynomial model, based on analysis of variances and the one standard error rule applied to cross validation error (estimated prediction error),
        c) plots the model against the data points and generates residual plots. 
        d) BUGS: 
            i) Implements cross validation naively on time series data. See item 4 for improved implementation.
            ii) Calculates standard error of estimated prediction error by repeatedly implementing cross validation in 100 trials, instead of implementing cv once and calculating standard deviation of distribution of estimated errors for models fit on the different cross validation folds. Repeating cross validation on 18 folds 100 times for each polynomial degree leads to performance issues.

   4. careful_cross_validation - An R script which fixes the bugs in part 3:
        a) Implements the one standard error rule using a form of cross validation more appropriate for time series data (cv was used naively in analyze_dc). This analysis settles on a quadratic model; so we've justified a simpler model using a more appropriate technique. 
        b) Calculates standard error of estimated prediction error correctly, performing cross validation only once. 


TO FIX IN FUTURE VERSIONS:
   1. While searching for data on energy demand, I was unable to find hourly by-county data. As a consequence, the data I analyze thus far is monthly. This lead to a small sample size (months from 2001 to 2019), an unfortunate result; and forced me to aggregate daily weather data into monthly averages so I could join it with the energy demand data. In an upcoming update of this project, I will obtain hourly data by looking not at counties but at local electrical utilities (whose operations may straddle county boundaries).
